# Simple Chat Example

This application is a minimal example of how to use the `flutter_genui` package to create a simple, conversational chat application.

## Purpose

The main goal of this example is to demonstrate the fundamental concepts of `flutter_genui` in a straightforward chat context. It shows how to:

1. Initialize and use the `UiAgent`, the primary facade for the package.
2. Provide a simple system prompt to guide the AI's behavior.
3. Send user messages to the AI and receive responses.
4. Handle the creation of new UI "surfaces" generated by the AI.
5. Render these dynamic UI surfaces within a standard chat message list.
6. Manage a conversation history that interleaves user text messages with AI-generated UI responses.

Unlike more complex examples, this app does not define a custom widget catalog. Instead, it relies on the default `coreCatalog` provided by `flutter_genui`, meaning the AI can only respond with basic widgets like `Text`, `Column`, `ElevatedButton`, etc.

## How it Works

The application's logic is contained almost entirely within `lib/main.dart`.

1. **Initialization**: A `UiAgent` is created with a simple system prompt instructing it to act as a helpful assistant. It's configured with an `onSurfaceAdded` callback.
2. **User Input**: The user types a message into a `TextField` and hits send.
3. **Sending the Message**:
   - The user's text is immediately added to the local message list and displayed on screen as a simple text message (e.g., "You: Hello").
   - The `uiAgent.sendRequest()` method is called with the user's text wrapped in a `UserMessage`.
4. **AI Response**:
   - The `UiAgent` sends the conversation history to the AI model.
   - The AI processes the prompt and, according to its instructions, calls the `addOrUpdateSurface` tool to create a UI response.
5. **UI Rendering**:
   - The `UiAgent` executes the tool call, which triggers the `onSurfaceAdded` callback in the app.
   - The callback adds a new message item to the list, this time containing the `surfaceId` of the newly created UI.
   - The `ListView` rebuilds, and a `GenUiSurface` widget is rendered for the AI's message, dynamically building the UI defined by the model.

## Getting Started

To run this application, you will need to have a Firebase project set up and configured.

1. **Configure Firebase**: Follow the instructions in the main `flutter_genui` [USAGE.md](../../packages/flutter_genui/USAGE.md) to add Firebase to your Flutter app. You will need to replace the placeholder values in `lib/firebase_options.dart` with the configuration from your own Firebase project.
2. **Run the App**: Once Firebase is configured, you can run the app like any other Flutter project:

   ```bash
   flutter run
   ```
